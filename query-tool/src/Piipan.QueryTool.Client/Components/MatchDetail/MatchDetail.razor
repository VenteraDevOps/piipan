@using Newtonsoft.Json
@using Piipan.Match.Api.Models.Resolution
@using Piipan.QueryTool.Client.Models
@using Piipan.Components.Layout
@using Piipan.Components.Tag

@code {
    [Parameter] public ParameterBase<MatchResApiResponse> Match { get; set; }

    private TagTheme StatusTheme()
    {
        return Match.Data.Data.Status.ToLower() switch
        {
            "open" => TagTheme.Green,
            _ => TagTheme.Gray
        };
    }
    private Disposition InitiatingStateDisposition =>
        Match.Data.Data.Dispositions.FirstOrDefault(n => string.Compare(n.State, Match.Data.Data.Initiator, StringComparison.CurrentCultureIgnoreCase) == 0);

    private Disposition MatchingStateDisposition =>
        Match.Data.Data.Dispositions.FirstOrDefault(n => string.Compare(n.State, Match.Data.Data.Initiator, StringComparison.CurrentCultureIgnoreCase) != 0);

    private Participant InitiatingStateParticipant =>
        Match.Data.Data.Participants.FirstOrDefault(n => string.Compare(n.State, Match.Data.Data.Initiator, StringComparison.CurrentCultureIgnoreCase) == 0);

    private Participant MatchingStateParticipant =>
        Match.Data.Data.Participants.FirstOrDefault(n => string.Compare(n.State, Match.Data.Data.Initiator, StringComparison.CurrentCultureIgnoreCase) != 0);
}
<div class="grid-container">

    <!-- Match header -->
    <div class="grid-row">
        <h1><UsaTag Theme="StatusTheme()">@Match.Data.Data.Status</UsaTag><span>Match ID: @Match.Data.Data.MatchId</span></h1>
    </div>
    <!-- \match header -->
    <div style="max-width: 860px">
        <UsaAccordion>
            <UsaAccordionItem StartsExpanded="true">
                <HeadingContent>Match Information</HeadingContent>
                <BodyContent>
                    <p>Each state's most recent updates are displayed below.</p>
                    <div class="two-state-grid">
                        <StateDispositionInformation Disposition="@InitiatingStateDisposition" InitiatingState="true" />
                        <StateDispositionInformation Disposition="@MatchingStateDisposition" InitiatingState="false" />
                    </div>
                </BodyContent>
            </UsaAccordionItem>
        </UsaAccordion>
        <UsaAccordion>
            <UsaAccordionItem StartsExpanded="true">
                <HeadingContent>SNAP Participant Information</HeadingContent>
                <BodyContent>
                    <ul>
                        <li>Use your state’s Case Number and Participant ID to identify the individual involved</li>
                        <li>Use the other state’s Case Number and Participant ID to commuinicate about the individual without exposing more sensitive PII, such as Name, Date of Birth, or Social Security Number</li>
                    </ul>
                    <div class="two-state-grid">
                        <StateParticipantInformation Participant="@InitiatingStateParticipant" InitiatingState="true" />
                        <StateParticipantInformation Participant="@MatchingStateParticipant" InitiatingState="false" />
                    </div>
                </BodyContent>
            </UsaAccordionItem>
        </UsaAccordion>
    </div>
</div> 