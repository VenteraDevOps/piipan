@page "{id?}"
@using Microsoft.AspNetCore.Antiforgery
@using Piipan.Match.Api.Models.Resolution
@using Piipan.QueryTool.Client.Models
@inject IAntiforgery antiforgery
@model Piipan.QueryTool.Pages.MatchModel
@{
    ViewData["Title"] = "NAC Participant Search";
}

@if (Model.Match != null)
{
    <div class="grid-container">
        <component type="typeof(QueryTool.Client.Components.MatchDetail.MatchDetail)" render-mode="WebAssembly"
            param-Match="ParameterBase<MatchResApiResponse>.FromObject(Model.Match)" />
    </div>
}
else
{
    <div class="grid-container">
        <component type="typeof(QueryTool.Client.Components.MatchForm)" render-mode="WebAssembly"
            param-Query="Model.Query"
            param-QueryResult="ParameterBase<List<MatchResApiResponse>>.FromObject(Model.AvailableMatches)" 
            param-Token="antiforgery.GetAndStoreTokens(HttpContext).RequestToken"
            param-ServerErrors="Model.RequestErrors" />
    </div>
}
