# Schema for participant records in response objects
ParticipantRecord:
  type: "object"
  required:
    - state
    - participant_id
    - case_id
    - match_id
    - match_url
    - lds_hash
  properties:
    match_id:
      type: string
      description: "Unique identifier for the match. Generated by the NAC system when a match is found."
    lds_hash:
      type: string
      description: "SHA-512 digest of participant's last name, DoB, and SSN. See docs/pprl.md for details."
    state:
      type: string
      description: "State/territory two-letter postal abbreviation"
    case_id:
      type: string
      description: "Participant's state-specific case identifier. Can be the same for multiple participants."
    participant_id:
      type: string
      description: "Participant's state-specific identifier. Unique to the participant. Must not include social security number or other identifying information used outside of the benefits eligibility context."
    participant_closing_date:
      type: string
      pattern: '^\d{4}-\d{2}-\d{2}$'
      example: "2021-01-31"
      description: "Date when the Participant's case will close. This will be the last date the participate is eligible to receive benefits."
    recent_benefit_issuance_dates:
      type: array
      description: "Collection of up to 3 date ranges that participant has been receiving benefits at the time the match was found."
      minLength: 0
      maxLength: 3
      items:
        type: object
        description: "A single date range"
        properties:
          start:
            type: string
            format: date
            pattern: '^\d{4}-\d{2}-\d{2}$'
            description: "start date for date range"
          end:
            type: string
            format: date
            pattern: '^\d{4}-\d{2}-\d{2}$'
            description: "end date for date range"
    vulnerable_individual:
      type: boolean
      nullable: true
      example: true
      description: "Location protection flag for vulnerable individuals. True values indicate that the individualâ€™s location must be protected from disclosure to avoid harm to the individual. Apply the same protections to true and null values."
    match_url:
      type: string
      description: "URL to visit to view details about this match."

ParticipantRecordExamples:
  All:
    match_id: "BCD2345"
    lds_hash: "8846a0dac5cb2a49fa3571d36a41757c8ea955414ac5d88b418a6a9e8065e770f80be56dac18cedf538e718a6dfa10fc5b6058186c681ad61f4bfec976250616"
    state: "ea"
    case_id: "string"
    participant_id: "string"
    participant_closing_date: "2021-10-13"
    recent_benefit_issuance_dates:
     [
      {
        "start": "2021-05-01",
        "end": "2021-05-31"
      },
      {
        "start": "2021-04-01",
        "end": "2021-04-30"
      },
      {
        "start": "2021-03-01",
        "end": "2021-03-31"
      }
    ]
    vulnerable_individual: true
    match_url: "https://nac.example/match/BCD2345"
  AllEB:
    match_id: "XYZ9876"
    lds_hash: "2581e60af416384c03d60bc6fb3f047838d7fc8642def08fb37717618586286ac83948002a7f12873df5b161eece4fa33dab8a32097b82476ae2901d839dc616"
    state: "eb"
    case_id: "string"
    participant_id: "string"
    participant_closing_date: "2021-10-13"
    recent_benefit_issuance_dates:
     [
      {
        "start": "2021-05-01",
        "end": "2021-05-31"
      },
      {
        "start": "2021-04-01",
        "end": "2021-04-30"
      },
      {
        "start": "2021-03-01",
        "end": "2021-03-31"
      }
    ]
    vulnerable_individual: true
    match_url: "https://nac.example/match/XYZ9876"
  Required:
    match_id: "4567CDF"
    lds_hash: "713ba87711e3ebe6c05cce93595df19fb04a9f7cf423ca33e9d3e8a779a49f37c306ab84b8010986c34f898156a6e073403259cbe069bcd6fbae8f5cb2b0caa9"
    state: "ec"
    case_id: "string"
    participant_id: "string"
    participant_closing_date: null
    vulnerable_individual: null
    match_url: "https://nac.example/match/4567CDF"
